# {{PROJECT_NAME}} Development Mode (PowerShell)
# Builds frontend then runs Go server with dev flags

$ErrorActionPreference = "Stop"
$ROOT = Split-Path -Parent (Split-Path -Parent $MyInvocation.MyCommand.Path)

Write-Host "`n=== {{PROJECT_NAME}} Dev Mode ===" -ForegroundColor Cyan

# [1] Build frontend
Write-Host "[1] Building frontend..." -ForegroundColor Yellow
Set-Location "$ROOT\web"
npm run build

# [2] Run Go server (dev mode)
Write-Host "[2] Starting Go server (dev mode, port {{PORT}})..." -ForegroundColor Yellow
Write-Host ""
Write-Host "============================================" -ForegroundColor Green
Write-Host "  http://localhost:{{PORT}}"
Write-Host "============================================" -ForegroundColor Green
Write-Host ""

Set-Location $ROOT
go run -tags dev ./cmd/server -dev -config .local/app.config.yaml
